<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>PrepPal – Your personal classroom companion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/style.css" />
</head>
<body>
  <!-- ヘッダー -->
  <header class="container row top">
    <div class="row brand">
      <div class="logo">▣</div>
      <div>
        <div class="h1">PrepPal</div>
        <div class="muted sub">Your personal classroom companion</div>
      </div>
    </div>
    <div class="spacer"></div>

    <!-- ▼ テーマ切替（ライト/ダーク） -->
    <button id="themeToggle" class="icon-btn" title="テーマ切替（ライト/ダーク）" aria-label="テーマ切替">
      🌗
    </button>

    <span class="badge beta">Beta</span>
    <div class="chip">test</div>
  </header>

  <!-- タブ（ダミー表示） -->
  <nav class="container">
    <div class="tabs" role="tablist" aria-label="sections">
      <div class="tab" role="tab" aria-selected="true">Record</div>
      <div class="tab" role="tab" aria-selected="false">Notes</div>
      <div class="tab" role="tab" aria-selected="false">Timeline</div>
      <div class="tab" role="tab" aria-selected="false">Study</div>
    </div>
  </nav>

  <main class="container">
    <!-- 録音カード -->
    <section class="card">
      <div class="card-title">Lecture Recording</div>
      <div class="muted mb">Record your lecture and PrepPal will transcribe it automatically</div>

      <div id="recArea" class="rec-area">
        <!-- マイクの丸いボタンだけで開始/停止（JSでトグル制御） -->
        <button id="btnMic" class="mic-button" aria-pressed="false" aria-label="録音開始/停止">
          <div id="micWrap" class="mic-wrap" aria-hidden="true">
            <div class="mic-ring"></div>
            <div class="mic-ring2"></div>
            <svg class="mic" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 1.75a3.25 3.25 0 0 1 3.25 3.25v6a3.25 3.25 0 1 1-6.5 0v-6A3.25 3.25 0 0 1 12 1.75Z"/>
              <path d="M19 11v1a7 7 0 0 1-14 0v-1"/>
              <path d="M12 19v3"/>
            </svg>
          </div>
        </button>

        <div id="status" class="muted mt" aria-live="polite">Idle</div>
      </div>
    </section>

    <!-- Recent & 詳細 -->
    <section class="card">
      <div class="card-title">Recent Recordings</div>
      <div class="muted mb">Your latest lecture recordings</div>

      <!-- 一覧（クリックで詳細を開く） -->
      <div id="list" class="list" aria-live="polite"></div>

      <!-- ▼ 詳細パネル（JSで .active を付けて表示） -->
      <div id="detail" class="detail">
        <h3 class="detail-title">Details</h3>

        <!-- タイトル編集 -->
        <div class="card small">
          <div class="row" style="justify-content:space-between; align-items:center">
            <strong>Title</strong>
            <div class="row" style="gap:6px">
              <input id="editTitle" type="text" class="input" placeholder="タイトルを入力" />
              <button id="btnSaveTitle" class="btn btn-primary">Save</button>
            </div>
          </div>
        </div>

        <!-- 文字起こし -->
        <div class="card small">
          <strong>Transcription</strong>
          <pre id="tx"></pre>
        </div>

        <!-- 要約 -->
        <div class="card small">
          <strong>Summary</strong>
          <pre id="sum"></pre>
        </div>
      </div>
    </section>

    <!-- 重要センテンス入力 → 再要約 -->
    <section class="card" style="padding:12px; margin-top:12px">
      <div style="font-weight:650; margin-bottom:6px">重要センテンス入力（改行で複数行OK）</div>
      <textarea id="hlInput" rows="4" placeholder="例）&#10;勾配爆発を防ぐためにクリッピングを導入&#10;評価はF1スコアで再計算する" style="width:100%; padding:8px; border:1px solid var(--line); border-radius:8px;"></textarea>
      <div style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; align-items:center">
        <label>重み <input id="hlWeight" type="number" value="2.0" step="0.1" min="1" style="width:80px; margin-left:4px"></label>
        <button id="btnReSummInput" class="btn" style="background:#d97706; color:white">入力から再要約</button>
        <button id="btnSpeak" class="btn" style="background:#10b981; color:white">🔊 要約を読み上げ</button>
        <audio id="ttsPlayer"></audio>
      </div>
    </section>

    <!-- Reminder -->
    <section class="card">
      <div class="card-title">Reminder</div>
      <div class="muted mb">Demo(30s) or schedule by exam date</div>
      <div class="row wrap">
        <input id="email" type="email" placeholder="メール（任意）" class="input">
        <input id="goal" type="date" class="input">
        <button id="demo" class="btn dark">30秒デモ</button>
        <button id="schedule" class="btn slate">試験日ベースで登録</button>
      </div>
      <div id="next" class="muted mt">次回復習: -</div>
    </section>
  </main>

  <script src="/assets/app.js"></script>
</body>
</html>
